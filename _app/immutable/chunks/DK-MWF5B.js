import{z as M,N as w,A as N,B as t,C,E as i,F as I,G as m,u as y,H as b,I as _,J as L,K as T,M as O,O as B}from"./PBm0O4Vo.js";const H=Symbol("is custom element"),D=Symbol("is html");function R(e){if(t){var r=!1,a=()=>{if(!r){if(r=!0,e.hasAttribute("value")){var s=e.value;A(e,"value",null),e.value=s}if(e.hasAttribute("checked")){var c=e.checked;A(e,"checked",null),e.checked=c}}};e.__on_r=a,i(a),I()}}function A(e,r,a,s){var c=G(e);t&&(c[r]=e.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&e.nodeName==="LINK")||c[r]!==(c[r]=a)&&(r==="loading"&&(e[M]=a),a==null?e.removeAttribute(r):typeof a!="string"&&K(e).includes(r)?e[r]=a:e.setAttribute(r,a))}function G(e){return e.__attributes??(e.__attributes={[H]:e.nodeName.includes("-"),[D]:e.namespaceURI===w})}var S=new Map;function K(e){var r=e.getAttribute("is")||e.nodeName,a=S.get(r);if(a)return a;S.set(r,a=[]);for(var s,c=e,o=Element.prototype;o!==c;){s=C(c);for(var l in s)s[l].set&&a.push(l);c=N(c)}return a}function U(e,r,a=r){var s=new WeakSet;m(e,"input",async c=>{var o=c?e.defaultValue:e.value;if(o=u(e)?k(o):o,a(o),_!==null&&s.add(_),await L(),o!==(o=r())){var l=e.selectionStart,v=e.selectionEnd;e.value=o??"",v!==null&&(e.selectionStart=l,e.selectionEnd=Math.min(v,e.value.length))}}),(t&&e.defaultValue!==e.value||y(r)==null&&e.value)&&(a(u(e)?k(e.value):e.value),_!==null&&s.add(_)),b(()=>{var c=r();if(e===document.activeElement){var o=T??_;if(s.has(o))return}u(e)&&c===k(e.value)||e.type==="date"&&!c&&!e.value||c!==e.value&&(e.value=c??"")})}const n=new Set;function V(e,r,a,s,c=s){var o=a.getAttribute("type")==="checkbox",l=e;let v=!1;if(r!==null)for(var h of r)l=l[h]??(l[h]=[]);l.push(a),m(a,"change",()=>{var f=a.__value;o&&(f=g(l,f,a.checked)),c(f)},()=>c(o?[]:null)),b(()=>{var f=s();if(t&&a.defaultChecked!==a.checked){v=!0;return}o?(f=f||[],a.checked=f.includes(a.__value)):a.checked=O(a.__value,f)}),B(()=>{var f=l.indexOf(a);f!==-1&&l.splice(f,1)}),n.has(l)||(n.add(l),i(()=>{l.sort((f,d)=>f.compareDocumentPosition(d)===4?-1:1),n.delete(l)})),i(()=>{if(v){var f;if(o)f=g(l,f,a.checked);else{var d=l.find(E=>E.checked);f=d==null?void 0:d.__value}c(f)}})}function q(e,r,a=r){m(e,"change",s=>{var c=s?e.defaultChecked:e.checked;a(c)}),(t&&e.defaultChecked!==e.checked||y(r)==null)&&a(e.checked),b(()=>{var s=r();e.checked=!!s})}function g(e,r,a){for(var s=new Set,c=0;c<e.length;c+=1)e[c].checked&&s.add(e[c].__value);return a||s.delete(r),Array.from(s)}function u(e){var r=e.type;return r==="number"||r==="range"}function k(e){return e===""?null:+e}export{q as a,U as b,V as c,R as r,A as s};
