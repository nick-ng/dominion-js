var R=Object.defineProperty;var T=s=>{throw TypeError(s)};var B=(s,e,t)=>e in s?R(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var A=(s,e,t)=>B(s,typeof e!="symbol"?e+"":e,t),E=(s,e,t)=>e.has(s)||T("Cannot "+t);var i=(s,e,t)=>(E(s,e,"read from private field"),t?t.call(s):e.get(s)),l=(s,e,t)=>e.has(s)?T("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),w=(s,e,t,a)=>(E(s,e,"write to private field"),a?a.call(s,t):e.set(s,t),t);import{a2 as I,a3 as k,a4 as C,a5 as M,a6 as N,I as m,a7 as L,Q as x,a8 as U,a9 as Y,aa as q,V as H,ab as P,ac as Q,ad as V,ae as W,af as $,ag as D,ah as j,O as z,u as G,y as J,S as K,ai as X,W as F,g as Z,x as ee,A as se,s as te}from"./f0Mku_kX.js";import{s as ae,g as ie}from"./DjJkXag2.js";var o,d,h,b,p,v,g;class re{constructor(e,t=!0){A(this,"anchor");l(this,o,new Map);l(this,d,new Map);l(this,h,new Map);l(this,b,new Set);l(this,p,!0);l(this,v,()=>{var e=x;if(i(this,o).has(e)){var t=i(this,o).get(e),a=i(this,d).get(t);if(a)I(a),i(this,b).delete(t);else{var f=i(this,h).get(t);f&&(i(this,d).set(t,f.effect),i(this,h).delete(t),f.fragment.lastChild.remove(),this.anchor.before(f.fragment),a=f.effect)}for(const[r,n]of i(this,o)){if(i(this,o).delete(r),r===e)break;const c=i(this,h).get(n);c&&(k(c.effect),i(this,h).delete(n))}for(const[r,n]of i(this,d)){if(r===t||i(this,b).has(r))continue;const c=()=>{if(Array.from(i(this,o).values()).includes(r)){var _=document.createDocumentFragment();U(n,_),_.append(M()),i(this,h).set(r,{effect:n,fragment:_})}else k(n);i(this,b).delete(r),i(this,d).delete(r)};i(this,p)||!a?(i(this,b).add(r),C(n,c,!1)):c()}}});l(this,g,e=>{i(this,o).delete(e);const t=Array.from(i(this,o).values());for(const[a,f]of i(this,h))t.includes(a)||(k(f.effect),i(this,h).delete(a))});this.anchor=e,w(this,p,t)}ensure(e,t){var a=x,f=Y();if(t&&!i(this,d).has(e)&&!i(this,h).has(e))if(f){var r=document.createDocumentFragment(),n=M();r.append(n),i(this,h).set(e,{effect:N(()=>t(n)),fragment:r})}else i(this,d).set(e,N(()=>t(this.anchor)));if(i(this,o).set(a,e),f){for(const[c,u]of i(this,d))c===e?a.skipped_effects.delete(u):a.skipped_effects.add(u);for(const[c,u]of i(this,h))c===e?a.skipped_effects.delete(u.effect):a.skipped_effects.add(u.effect);a.oncommit(i(this,v)),a.ondiscard(i(this,g))}else m&&(this.anchor=L),i(this,v).call(this)}}o=new WeakMap,d=new WeakMap,h=new WeakMap,b=new WeakMap,p=new WeakMap,v=new WeakMap,g=new WeakMap;function he(s,e,t=!1){m&&H();var a=new re(s),f=t?P:0;function r(n,c){if(m){const _=Q(s)===V;if(n===_){var u=W();$(u),a.anchor=u,D(!1),a.ensure(n,c),D(!0);return}}a.ensure(n,c)}q(()=>{var n=!1;e((c,u=!0)=>{n=!0,r(u,c)}),n||r(!1,null)},f)}function O(s,e){return s===e||(s==null?void 0:s[K])===e}function ue(s={},e,t,a){return j(()=>{var f,r;return z(()=>{f=r,r=(a==null?void 0:a())||[],G(()=>{s!==t(...r)&&(e(s,...r),f&&O(t(...f),s)&&e(null,...f))})}),()=>{J(()=>{r&&O(t(...r),s)&&e(null,...r)})}}),s}let y=!1,S=Symbol();function oe(s,e,t){const a=t[e]??(t[e]={store:null,source:X(void 0),unsubscribe:F});if(a.store!==s&&!(S in t))if(a.unsubscribe(),a.store=s??null,s==null)a.source.v=void 0,a.unsubscribe=F;else{var f=!0;a.unsubscribe=ae(s,r=>{f?a.source.v=r:te(a.source,r)}),f=!1}return s&&S in t?ie(s):Z(a.source)}function de(){const s={};function e(){ee(()=>{for(var t in s)s[t].unsubscribe();se(s,S,{enumerable:!1,value:!0})})}return[s,e]}function le(s,e,t){return s.set(t),e}function be(s){var e=y;try{return y=!1,[s(),y]}finally{y=e}}export{re as B,le as a,ue as b,be as c,oe as d,he as i,de as s};
